<%= form_for(@project, :html=>{:class=>'form-vertical'}) do |f| %>
    <fieldset>
      <legend><%= controller.action_name.capitalize %> Project</legend>
      <div class="row">
        <% if @project.errors.any? %>
            <div id="error_explanation">
              <h2><%= pluralize(@project.errors.count, "error") %> prohibited this project from being saved:</h2>
              <ul>
                <% @project.errors.full_messages.each do |msg| %>
                    <li><%= msg %></li>
                <% end %>
              </ul>
            </div>
        <% end %>

        <div class="span3">


          <%= f.hidden_field :lat_sw %>
          <%= f.hidden_field :lng_sw %>
          <%= f.hidden_field :lat_ne %>
          <%= f.hidden_field :lng_ne %>

          <div class="control-group">
            <div class="control-label">Name of the project</div>
            <div class="controls"><%= f.text_field :name, :class=>"text-field" %></div>
          </div>

          <div class="control-group">
            <div class="control-label">Add your own map (optional)
            <a id="add_wms" href="http://sampleserver1.arcgisonline.com/arcgis/services/Specialty/ESRI_StatesCitiesRivers_USA/MapServer/WMSServer?REQUEST=GetMap&SERVICE=WMS&VERSION=1.3&BGCOLOR=0xFFFFFF&TRANSPARENT=TRUE&SRS=EPSG:4326&WIDTH=256&HEIGHT=256&Styles=default&FORMAT=image/jpeg&CRS=EPSG:4326&layers=0">example</a></div>
            <div class="controls"><%= f.text_field :wms_map, :class=>"text-field", :placeholder=>"URL of your WMS server" %>
              <br/>
              <button type="button" id="refresh_map" class="btn btn-small">refresh map <i class="icon-refresh"></i></button>
            </div>

          </div>

          <div class="alert alert-info" id='task_helper'>
            Draw a rectangle on the map to define the area to analyze
          </div>

          <div id="task_info" style="display:none">
            <div class="control-group">
              <div class="control-label">Area resolution per task (in Km)</div>
              <%= f.text_field :lat_res, :class=>"input-mini", :size=>"3", :maxlength=>"10", :placeholder=>"in km" %> x
              <%= f.text_field :lng_res, :class=>"input-mini", :size=>"3", :maxlength=>"10", :placeholder=>"in km" %>
            </div>

            <div class="control-group">
              <div class="control-label">Task redundancy</div>
              <div class="controls">
                <%= f.text_field :redundancy, :class=>"span1", :placeholder=>"3" %>
              </div>
            </div>
            <div><i class="icon-warning-sign"></i> Tasks generated:</div>
            <h3 id="nb_tasks" class=""></h3>
          </div>

        </div>

        <div class="span9">
          <div id="map" style="max-width:100%"></div>
        </div>

      </div>
      <div class="row">
        <div class="span12">

          <div class="control-group">
            <div class="control-label">
              Paste <a href="#">your MicroTask template code for each task</a>
            </div>
            <div class="controls">
              <%= f.text_area :description, :class=>"span12", :size => "50x5", :placeholder=>"Paste your micro-task template code" %>
            </div>
          </div>

          <div class="form-actions">
            <button class="btn btn-primary">Submit</button>
          </div>
        </div>
      </div>
    </fieldset>
<% end %>